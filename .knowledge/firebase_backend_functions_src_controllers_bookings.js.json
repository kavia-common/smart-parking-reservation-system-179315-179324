{"is_source_file": true, "format": "JavaScript", "description": "This file defines the BookingsController class, which handles HTTP requests related to booking operations such as reservation, cancellation, check-in, completion, and listing of user bookings in a smart parking reservation system.", "external_files": ["../services/bookings"], "external_methods": ["bookingsService.reserve", "bookingsService.cancel", "bookingsService.checkIn", "bookingsService.complete", "bookingsService.listUserBookings"], "published": ["new BookingsController()"], "classes": [{"name": "BookingsController", "description": "Controller class managing booking-related HTTP endpoints for the system."}], "methods": [{"name": "reserve(req, res)", "description": "Handles reservation of a parking slot for an authenticated user.", "scope": "BookingsController", "scopeKind": "class"}, {"name": "cancel(req, res)", "description": "Cancels a user's existing booking.", "scope": "BookingsController", "scopeKind": "class"}, {"name": "checkIn(req, res)", "description": "Validates QR code and sets booking status to in_progress.", "scope": "BookingsController", "scopeKind": "class"}, {"name": "complete(req, res)", "description": "Marks a booking as completed.", "scope": "BookingsController", "scopeKind": "class"}, {"name": "listMine(req, res)", "description": "Lists current user's bookings with optional filtering.", "scope": "BookingsController", "scopeKind": "class"}], "calls": ["bookingsService.reserve", "bookingsService.cancel", "bookingsService.checkIn", "bookingsService.complete", "bookingsService.listUserBookings"], "search-terms": ["BookingsController", "reserve", "cancel", "checkIn", "complete", "listMine", "firebase_backend_functions/src/controllers/bookings.js"], "state": 2, "file_id": 27, "knowledge_revision": 61, "git_revision": "", "ctags": [{"_type": "tag", "name": "BookingsController", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^class BookingsController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "booking_not_found", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^      const map = { booking_not_found: 404, cannot_complete: 400 };$/", "language": "JavaScript", "kind": "property", "scope": "BookingsController.complete.map", "scopeKind": "class"}, {"_type": "tag", "name": "booking_not_found", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^      const map = { booking_not_found: 404, forbidden: 403, cannot_cancel: 400 };$/", "language": "JavaScript", "kind": "property", "scope": "BookingsController.cancel.map", "scopeKind": "class"}, {"_type": "tag", "name": "bookingsService", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^const bookingsService = require('..\\/services\\/bookings');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "cancel", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^  async cancel(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "BookingsController", "scopeKind": "class"}, {"_type": "tag", "name": "cannot_cancel", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^      const map = { booking_not_found: 404, forbidden: 403, cannot_cancel: 400 };$/", "language": "JavaScript", "kind": "property", "scope": "BookingsController.cancel.map", "scopeKind": "class"}, {"_type": "tag", "name": "cannot_complete", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^      const map = { booking_not_found: 404, cannot_complete: 400 };$/", "language": "JavaScript", "kind": "property", "scope": "BookingsController.complete.map", "scopeKind": "class"}, {"_type": "tag", "name": "checkIn", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^  async checkIn(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "BookingsController", "scopeKind": "class"}, {"_type": "tag", "name": "complete", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^  async complete(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "BookingsController", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^module.exports = new BookingsController();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "forbidden", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^      const map = { booking_not_found: 404, forbidden: 403, cannot_cancel: 400 };$/", "language": "JavaScript", "kind": "property", "scope": "BookingsController.cancel.map", "scopeKind": "class"}, {"_type": "tag", "name": "listMine", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^  async listMine(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "BookingsController", "scopeKind": "class"}, {"_type": "tag", "name": "map", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^      const map = { booking_not_found: 404, cannot_complete: 400 };$/", "language": "JavaScript", "kind": "class", "scope": "BookingsController.complete", "scopeKind": "class"}, {"_type": "tag", "name": "map", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^      const map = { booking_not_found: 404, forbidden: 403, cannot_cancel: 400 };$/", "language": "JavaScript", "kind": "class", "scope": "BookingsController.cancel", "scopeKind": "class"}, {"_type": "tag", "name": "reserve", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/bookings.js", "pattern": "/^  async reserve(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "BookingsController", "scopeKind": "class"}], "hash": "52fd1d5406d8a71677b51a4d49e80846", "format-version": 4, "code-base-name": "firebase_backend_functions", "filename": "firebase_backend_functions/src/controllers/bookings.js", "fields": [{"name": "const map = { booking_not_found: 404, cannot_complete: 400 };", "scope": "BookingsController.complete.map", "scopeKind": "class", "description": "unavailable"}, {"name": "const map = { booking_not_found: 404, forbidden: 403, cannot_cancel: 400 };", "scope": "BookingsController.cancel.map", "scopeKind": "class", "description": "unavailable"}, {"name": "module.exports = new BookingsController();", "scope": "module", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"61": ""}]}