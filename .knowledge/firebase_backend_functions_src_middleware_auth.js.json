{"is_source_file": true, "format": "JavaScript", "description": "This file implements middleware functions for authentication and authorization in a Firebase-based backend. It verifies Firebase ID tokens and enforces admin role authorization.", "external_files": ["../config/firebase"], "external_methods": ["auth.verifyIdToken", "db.collection('users').doc().get()"], "published": ["verifyFirebaseAuth", "requireAdmin"], "classes": [], "methods": [{"name": "verifyFirebaseAuth(req, res, next)", "description": "Middleware that verifies Firebase ID tokens from the Authorization header and attaches user info to the request object.", "scope": "", "scopeKind": ""}, {"name": "requireAdmin(req, res, next)", "description": "Middleware that ensures the authenticated user has an admin role.", "scope": "", "scopeKind": ""}], "calls": ["req.get", "auth.verifyIdToken", "db.collection", "userDoc.exists", "userDoc.data", "next", "console.error"], "search-terms": ["Firebase auth middleware", "auth.verifyIdToken", "authorization header", "admin role check", "auth.js"], "state": 2, "file_id": 18, "knowledge_revision": 41, "git_revision": "", "ctags": [{"_type": "tag", "name": "requireAdmin", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/middleware/auth.js", "pattern": "/^function requireAdmin(req, res, next) {$/", "language": "JavaScript", "kind": "function", "signature": "(req, res, next)"}, {"_type": "tag", "name": "uid", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/middleware/auth.js", "pattern": "/^      uid,$/", "language": "JavaScript", "kind": "field", "scope": "req.user", "scopeKind": "class"}, {"_type": "tag", "name": "verifyFirebaseAuth", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/middleware/auth.js", "pattern": "/^  verifyFirebaseAuth,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "verifyFirebaseAuth", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/middleware/auth.js", "pattern": "/^async function verifyFirebaseAuth(req, res, next) {$/", "language": "JavaScript", "kind": "function", "signature": "(req, res, next)"}], "hash": "25d364aaf98486aa058e745c4d75fc28", "format-version": 4, "code-base-name": "firebase_backend_functions", "filename": "firebase_backend_functions/src/middleware/auth.js", "fields": [{"name": "uid,", "scope": "req.user", "scopeKind": "class", "description": "unavailable"}, {"name": "verifyFirebaseAuth,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"41": ""}]}