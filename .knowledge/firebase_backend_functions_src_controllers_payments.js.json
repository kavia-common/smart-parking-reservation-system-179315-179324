{"is_source_file": true, "format": "JavaScript", "description": "This file defines the PaymentsController class which provides endpoints for creating payment intents and handling Stripe webhooks in a Firebase backend context.", "external_files": ["../services/payments", "../utils/stripe"], "external_methods": ["paymentsService.isEnabled", "paymentsService.createPaymentIntent", "paymentsService.handleStripeWebhook", "require('../utils/stripe').getStripe"], "published": ["PaymentsController"], "classes": [{"name": "PaymentsController", "description": "Controller class managing payment-related HTTP endpoints in the backend."}], "methods": [{"name": "createIntent(req, res)", "description": "Creates a Stripe PaymentIntent if payments are enabled and required parameters are provided.", "scope": "PaymentsController", "scopeKind": "class"}, {"name": "webhook(req, res)", "description": "Handles Stripe webhook events, verifying signatures if a webhook secret is configured, and delegates processing to the payments service.", "scope": "PaymentsController", "scopeKind": "class"}], "calls": ["paymentsService.isEnabled", "paymentsService.createPaymentIntent", "paymentsService.handleStripeWebhook", "require('../utils/stripe').getStripe", "stripe.webhooks.constructEvent"], "search-terms": ["PaymentsController", "createPaymentIntent", "Stripe webhook", "paymentsService", "createIntent", "webhook", "Stripe signature verification", "payments disabled"], "state": 2, "file_id": 28, "knowledge_revision": 62, "git_revision": "", "ctags": [{"_type": "tag", "name": "PaymentsController", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/payments.js", "pattern": "/^class PaymentsController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "createIntent", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/payments.js", "pattern": "/^  async createIntent(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "PaymentsController", "scopeKind": "class"}, {"_type": "tag", "name": "crypto", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/payments.js", "pattern": "/^const crypto = require('crypto');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/payments.js", "pattern": "/^module.exports = new PaymentsController();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "paymentsService", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/payments.js", "pattern": "/^const paymentsService = require('..\\/services\\/payments');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "webhook", "path": "/home/kavia/workspace/code-generation/smart-parking-reservation-system-179315-179324/firebase_backend_functions/src/controllers/payments.js", "pattern": "/^  async webhook(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "PaymentsController", "scopeKind": "class"}], "hash": "df805979e00d556f1f69a44edebcdab1", "format-version": 4, "code-base-name": "firebase_backend_functions", "filename": "firebase_backend_functions/src/controllers/payments.js", "fields": [{"name": "module.exports = new PaymentsController();", "scope": "module", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"62": ""}]}